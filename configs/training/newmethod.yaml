# ============================================================================
# DATASET CONFIGURATION FILE - HYBRID DATASET
# (CRC + Xenium + TissueNet + PanNuke + Lizard + MoNuSeg + TNBC + NuInsSeg + CryoNuSeg + BC + ConSep + Kumar + CPM-17)
# ============================================================================

# ============================================================================
# 1. DATA PATHS
# ============================================================================
data:
  zarr_bases:
    pannuke: "/rsrch9/home/plm/idso_fa1_pathology/TIER2/yasin-vitaminp/pannuke/zarr_data"
  cache_dir: "./cache"
  cache_filename: "multimodal_dataset_cache_fold1.pkl"

# ============================================================================
# 2. SAMPLE SPLITS
# ============================================================================
splits:
  # --------------------------------------------------------------------------
  # TRAIN SET (Optimization)
  # --------------------------------------------------------------------------
  train_samples:
    # --- PanNuke (Folds 1 & 2) ---
    - Fold1
    - Fold2
  val_samples:
    # --- PanNuke (Fold 3) ---
    - Fold3
  test_samples:
    # --- TissueNet ---
    - Fold3


  # --------------------------------------------------------------------------
  # GLOBAL SETTINGS
  # --------------------------------------------------------------------------
  train_ratio: 0.90
  val_ratio: 0.09
  test_ratio: 0.01
  random_seed: 42

  # List of ALL folders to scan (must include every sample named above)
  all_samples:
    # PanNuke
    - Fold1
    - Fold2
    - Fold3

# ============================================================================
# 3. DATALOADER SETTINGS
# ============================================================================
dataloader:
  batch_size: 4
  num_workers: 16
  pin_memory: true
  persistent_workers: true
  prefetch_factor: 2
  shuffle_train: true

# ============================================================================
# 4. DATA PROCESSING
# ============================================================================
processing:
  normalize: true
  normalize_method: "minmax"
  # Note: PanNuke, Xenium, Lizard, MoNuSeg, TNBC, NuInsSeg, CryoNuSeg, and BC are uint8 (0-255).
  he_max_value: 255.0
  mif_max_value: 65535.0

# ============================================================================
# 5. AUGMENTATION SETTINGS
# ============================================================================
augmentation:
  train_augment: true
  val_augment: false
  test_augment: false
  augment_prob: 0.5
  
  geometric:
    flip_prob: 0.5
    rotation_prob: 0.4
    rotation_angles: [90, 180, 270]
    scale_prob: 0.15
    scale_range: [0.97, 1.03]
  
  photometric:
    brightness_prob: 0.2
    brightness_factor: 0.15
    contrast_prob: 0.1
    contrast_factor: 0.15
  
  stain:
    stain_prob: 0.1
    hue_shift_range: [-0.03, 0.03]
    saturation_range: [0.92, 1.08]
  
  noise_blur:
    blur_prob: 0.4
    blur_sigma_range: [0.1, 0.5]
    noise_prob: 0.3
    noise_he_std_range: [0.005, 0.025]
    noise_mif_std_range: [0.002, 0.01]
  
  cutout:
    cutout_prob: 0.3
    cutout_size_range: [8, 24]

# ============================================================================
# 6. HV MAP GENERATION
# ============================================================================
hv_maps:
  generate: true
  method: "pannuke"
  he_nuclei: true
  he_cells: true
  mif_nuclei: true
  mif_cells: true

# ============================================================================
# 7. FILTERING
# ============================================================================
filtering:
  min_instances_per_tile: 0
  filter_empty_masks: true
  min_he_nuclei: 0
  min_he_cells: 0
  min_mif_nuclei: 0
  min_mif_cells: 0

# ============================================================================
# 8. MEMORY & CACHING
# ============================================================================
memory:
  use_cache: false
  force_regenerate_cache: false
  strategy: "memory"
  max_memory_gb: 32.0
  chunk_size: 1000

# ============================================================================
# 9. DEBUGGING
# ============================================================================
debug:
  verbose: true
  max_samples: null
  print_data_stats: true
  validate_data: true